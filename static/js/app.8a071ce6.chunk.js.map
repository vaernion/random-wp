{"version":3,"sources":["src/languages.js","src/styles.js","App.js","src/index.js","web-build/register-service-worker.js"],"names":["langs","code","name","wp","styles","StyleSheet","create","controls","flexDirection","justifyContent","alignItems","marginTop","marginBottom","dummyContainer","width","refreshContainer","langPicker","refreshButton","pageContainer","flex","pageContent","alignSelf","padding","backgroundColor","title","fontWeight","fontSize","thumbnail","margin","sourceLink","sourceLinkText","color","Index","React","useState","lang","setLang","wikipediaLocalized","setWikipediaLocalized","pageJson","setPageJson","errorText","setErrorText","useEffect","handleRefresh","fetchWiki","fetch","then","response","json","console","log","find","e","catch","error","View","style","Text","onPress","type","size","Picker","selectedValue","onValueChange","langCode","handleLang","map","Item","key","label","value","contentContainerStyle","description","Image","height","source","uri","extract","WebBrowser","content_urls","mobile","page","navigator","window","addEventListener","serviceWorker","register","scope","info"],"mappings":"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","file":"static/js/app.8a071ce6.chunk.js","sourcesContent":["export const langs = [\n  { code: \"en\", name: \"English\", wp: \"Wikipedia\" },\n  { code: \"de\", name: \"Deutsch\", wp: \"Wikipedia\" },\n  { code: \"fr\", name: \"Français\", wp: \"Wikipédia\" },\n  { code: \"ru\", name: \"Русский\", wp: \"Википедия\" },\n  { code: \"it\", name: \"Italiano\", wp: \"Wikipedia\" },\n  { code: \"es\", name: \"Español\", wp: \"Wikipedia\" },\n  { code: \"pl\", name: \"Polski\", wp: \"Wikipedia\" },\n  { code: \"ja\", name: \"日本語\", wp: \"ウィキペディア\" },\n  { code: \"zh\", name: \"中文\", wp: \"维基百科\" },\n  { code: \"pt\", name: \"Português\", wp: \"Wikipédia\" },\n  { code: \"no\", name: \"Norsk bokmål\", wp: \"Wikipedia\" },\n  { code: \"nn\", name: \"Norsk nynorsk\", wp: \"Wikipedia\" },\n  { code: \"ar\", name: \"العربية\", wp: \"ويكيبيديا\" },\n  { code: \"nl\", name: \"Nederlands\", wp: \"Wikipedia\" },\n  { code: \"ceb\", name: \"Sinugboanong Binisaya\", wp: \"Wikipedya\" },\n  { code: \"sv\", name: \"Svenska\", wp: \"Wikipedia\" },\n  { code: \"vi\", name: \"Tiếng Việt\", wp: \"Wikipedia\" },\n  { code: \"war\", name: \"Winaray\", wp: \"Wikipedia\" },\n];\n","import { StyleSheet } from \"react-native\";\n\nexport const styles = StyleSheet.create({\n  controls: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginTop: 40,\n    marginBottom: 10,\n  },\n  dummyContainer: {\n    width: 120,\n  },\n  refreshContainer: {\n    width: 100,\n    alignItems: \"center\",\n  },\n  langPicker: {\n    width: 120,\n  },\n  refreshButton: {\n    width: 50,\n  },\n  pageContainer: {\n    flex: 1,\n    marginBottom: 20,\n  },\n  pageContent: {\n    width: \"90%\",\n    alignSelf: \"center\",\n    alignItems: \"center\",\n    padding: 20,\n    backgroundColor: \"#F5FCFF\",\n  },\n  title: {\n    fontWeight: \"bold\",\n    fontSize: 20,\n  },\n  thumbnail: {\n    margin: 15,\n  },\n  sourceLink: {\n    marginTop: 10,\n  },\n  sourceLinkText: {\n    color: \"blue\",\n  },\n});\n","import { Index } from \"./src\";\n\nexport default Index;\n","import * as WebBrowser from \"expo-web-browser\";\nimport React from \"react\";\nimport { Image, Picker, Text, View } from \"react-native\";\nimport { Icon } from \"react-native-elements\";\nimport { ScrollView, TouchableOpacity } from \"react-native-gesture-handler\";\nimport { langs } from \"./languages\";\nimport { styles } from \"./styles\";\n\nexport function Index() {\n  const [lang, setLang] = React.useState(\"en\");\n  const [wikipediaLocalized, setWikipediaLocalized] = React.useState(null);\n  const [pageJson, setPageJson] = React.useState(null);\n  const [errorText, setErrorText] = React.useState(\"\");\n\n  React.useEffect(() => {\n    if (!lang) {\n      setLang(\"en\");\n      return;\n    }\n    handleRefresh();\n  }, [lang]);\n\n  const handleLang = (langCode) => {\n    setLang(langCode);\n  };\n\n  const handleRefresh = () => {\n    fetchWiki(lang);\n  };\n\n  const fetchWiki = (lang) => {\n    const url = `https://${lang}.wikipedia.org/api/rest_v1/page/random/summary`;\n\n    fetch(url)\n      .then((response) => response.json())\n      .then((json) => {\n        setErrorText(\"\");\n        console.log(json);\n        setPageJson(json);\n        // hack to stall wp link label when changing language, at the cost of one render\n        setWikipediaLocalized(langs.find((e) => e.code === lang).wp);\n      })\n      .catch((error) => {\n        // could add translations as with wikipediaLocalized\n        setErrorText(\"Error, try again\");\n        console.log(\"fetch error: \", error);\n      });\n  };\n\n  const handleSourceLink = () => {\n    WebBrowser.openBrowserAsync(pageJson.content_urls.mobile.page);\n  };\n\n  return (\n    <>\n      <View style={styles.controls}>\n        <View style={styles.dummyContainer}></View>\n        <View style={styles.refreshContainer}>\n          <Text>{errorText}</Text>\n          <TouchableOpacity\n            style={styles.refreshButton}\n            onPress={handleRefresh}\n          >\n            <Icon name=\"redo\" type=\"font-awesome-5\" size={35} />\n          </TouchableOpacity>\n        </View>\n        <Picker\n          style={styles.langPicker}\n          selectedValue={lang}\n          onValueChange={(langCode) => handleLang(langCode)}\n        >\n          {langs.map((e) => (\n            <Picker.Item key={e.code} label={e.name} value={e.code} />\n          ))}\n        </Picker>\n      </View>\n\n      {pageJson ? (\n        <>\n          <ScrollView\n            style={styles.pageContainer}\n            contentContainerStyle={styles.pageContent}\n          >\n            <Text style={styles.title}>{pageJson.title}</Text>\n            <Text>{pageJson.description ? pageJson.description : null}</Text>\n            {pageJson.thumbnail ? (\n              <Image\n                style={[\n                  styles.thumbnail,\n                  {\n                    height: pageJson.thumbnail.height,\n                    width: pageJson.thumbnail.width,\n                  },\n                ]}\n                source={{ uri: pageJson.thumbnail.source }}\n              ></Image>\n            ) : null}\n            <Text>{pageJson.extract}</Text>\n            <TouchableOpacity\n              style={styles.sourceLink}\n              onPress={handleSourceLink}\n            >\n              <Text style={styles.sourceLinkText}>\n                {wikipediaLocalized}: {pageJson.title}\n              </Text>\n            </TouchableOpacity>\n          </ScrollView>\n        </>\n      ) : null}\n    </>\n  );\n}\n","/* eslint-env browser */\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function () {\n    navigator.serviceWorker\n      .register('/random-wp/expo-service-worker.js', { scope: '/random-wp/' })\n      .then(function (info) {\n        // console.info('Registered service-worker', info);\n      })\n      .catch(function (error) {\n        console.info('Failed to register service-worker', error);\n      });\n  });\n}\n"],"sourceRoot":""}